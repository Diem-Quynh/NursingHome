{"ast":null,"code":"import BaseApi from './BaseService';\n\nclass User extends BaseApi {\n  constructor(context) {\n    super(context);\n    this.name = 'users'; //kế thừa CRUD từ thằng cha\n  }\n\n  async login({\n    data\n  }) {\n    const url = this.route(\"api.login\").href;\n    let result = (await this.Request.post(url, data)) || {}; //success\n\n    this.cookies.set('token', this.getData(result, \"token\", undefined), {\n      path: \"/\"\n    });\n    this.cookies.set('user', this.getData(result, \"user\", {}), {\n      path: \"/\"\n    });\n    this.redirect(\"frontend.admin.home\");\n    return result;\n  }\n\n  async updatePassword(data) {\n    const url = this.route(`api.${this.name}.updatePassword`, data).href;\n    let result = await this.Request.put(url, data);\n    return result.data;\n  }\n\n  async search(data) {\n    const url = this.route(`api.${this.name}.search`, data).href;\n    return await this.Request.get(url, data);\n  }\n\n}\n\nexport default User;","map":{"version":3,"sources":["E:/DATN/nursinghome/themes/services/api/UserService.ts"],"names":["BaseApi","User","constructor","context","name","login","data","url","route","href","result","Request","post","cookies","set","getData","undefined","path","redirect","updatePassword","put","search","get"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,eAApB;;AAEA,MAAMC,IAAN,SAAmBD,OAAnB,CAA2B;AACzBE,EAAAA,WAAW,CAACC,OAAD,EAAmB;AAC5B,UAAMA,OAAN;AACA,SAAKC,IAAL,GAAY,OAAZ,CAF4B,CAEP;AACtB;;AACD,QAAMC,KAAN,CAAY;AAAEC,IAAAA;AAAF,GAAZ,EAAoE;AAClE,UAAMC,GAAG,GAAG,KAAKC,KAAL,CAAW,WAAX,EAAwBC,IAApC;AACA,QAAIC,MAAM,GAAG,OAAM,KAAKC,OAAL,CAAaC,IAAb,CAAkBL,GAAlB,EAAuBD,IAAvB,CAAN,KAAsC,EAAnD,CAFkE,CAGhE;;AACF,SAAKO,OAAL,CAAaC,GAAb,CAAiB,OAAjB,EAA0B,KAAKC,OAAL,CAAaL,MAAb,EAAqB,OAArB,EAA8BM,SAA9B,CAA1B,EAAoE;AAClEC,MAAAA,IAAI,EAAE;AAD4D,KAApE;AAGA,SAAKJ,OAAL,CAAaC,GAAb,CAAiB,MAAjB,EAAyB,KAAKC,OAAL,CAAaL,MAAb,EAAqB,MAArB,EAA6B,EAA7B,CAAzB,EAA0D;AACxDO,MAAAA,IAAI,EAAE;AADkD,KAA1D;AAGA,SAAKC,QAAL,CAAc,qBAAd;AACA,WAAOR,MAAP;AACD;;AACD,QAAMS,cAAN,CAAqBb,IAArB,EAA2D;AACzD,UAAMC,GAAG,GAAG,KAAKC,KAAL,CAAY,OAAM,KAAKJ,IAAK,iBAA5B,EAA8CE,IAA9C,EAAoDG,IAAhE;AACA,QAAIC,MAAM,GAAG,MAAM,KAAKC,OAAL,CAAaS,GAAb,CAAiBb,GAAjB,EAAsBD,IAAtB,CAAnB;AACA,WAAOI,MAAM,CAACJ,IAAd;AACD;;AACD,QAAMe,MAAN,CAAaf,IAAb,EAAuB;AACrB,UAAMC,GAAG,GAAG,KAAKC,KAAL,CAAY,OAAM,KAAKJ,IAAK,SAA5B,EAAsCE,IAAtC,EAA4CG,IAAxD;AACA,WAAO,MAAM,KAAKE,OAAL,CAAaW,GAAb,CAAiBf,GAAjB,EAAsBD,IAAtB,CAAb;AACD;;AA1BwB;;AA6B3B,eAAeL,IAAf","sourcesContent":["import BaseApi from './BaseService'\r\n\r\nclass User extends BaseApi {\r\n  constructor(context?: Context){\r\n    super(context)\r\n    this.name = 'users'; //kế thừa CRUD từ thằng cha\r\n  }\r\n  async login({ data }: {data: {username: string, password: string}}) {\r\n    const url = this.route(\"api.login\").href\r\n    let result = await this.Request.post(url, data) || {}\r\n      //success\r\n    this.cookies.set('token', this.getData(result, \"token\", undefined), {\r\n      path: \"/\"\r\n    })\r\n    this.cookies.set('user', this.getData(result, \"user\", {}),{\r\n      path: \"/\"\r\n    })\r\n    this.redirect(\"frontend.admin.home\")\r\n    return result;\r\n  }\r\n  async updatePassword(data: { id: number, password: string}){\r\n    const url = this.route(`api.${this.name}.updatePassword`, data).href\r\n    let result = await this.Request.put(url, data)\r\n    return result.data;\r\n  }\r\n  async search(data: any){\r\n    const url = this.route(`api.${this.name}.search`, data).href\r\n    return await this.Request.get(url, data)\r\n  }\r\n}\r\n\r\nexport default User"]},"metadata":{},"sourceType":"module"}