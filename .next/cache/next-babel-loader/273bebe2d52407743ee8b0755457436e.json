{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar UrlPattern = require('url-pattern');\n\nvar queryString = require('query-string');\n\nimport Router from 'next/router';\nimport routeConfig from './_routes';\nimport sidebar from './sidebar';\n\nvar Route = /*#__PURE__*/function () {\n  function Route() {\n    _classCallCheck(this, Route);\n  }\n\n  _createClass(Route, null, [{\n    key: \"makeUrl\",\n    value: function makeUrl(name, params) {\n      var routeInfo = routeConfig[name];\n\n      if (!routeInfo) {\n        //console.error(`Route ${name} not found`)\n        throw Error(\"Route \".concat(name, \" not found\"));\n      }\n\n      var pattern = new UrlPattern(routeInfo.url);\n      var query = queryString.stringify(params);\n\n      try {\n        var asUrl = pattern.stringify(params); //link hiển thị trên trình duyệt\n\n        var href = asUrl; //link thật trong /pages\n\n        if (routeInfo.action.substr(0, 6) === \"pages/\") {\n          href = routeInfo.action.substr(5);\n\n          if (href.indexOf('?') === -1) {\n            href += \"?\".concat(query);\n          } else {\n            href += \"&\".concat(query);\n          }\n        }\n\n        return {\n          as: asUrl,\n          href: href\n        };\n      } catch (e) {\n        //console.error(e)\n        throw e;\n      }\n    }\n  }, {\n    key: \"addQuery\",\n    value: function addQuery(query) {\n      var shallow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!true) return;\n      var asPath = window.location.pathname;\n      var oldQuery = Router.router.query;\n\n      var queryObj = _objectSpread({}, oldQuery, {}, query);\n\n      if (JSON.stringify(queryObj) == JSON.stringify(oldQuery)) return;\n      var queryStringAppend = queryString.stringify(queryObj);\n      /* if(queryStringAppend){\r\n        Router.push({\r\n          pathname: Router.router.pathname,\r\n          query: queryObj,\r\n        }, {\r\n          pathname: asPath,\r\n          query: queryObj\r\n        }, {\r\n          shallow: shallow,\r\n        })\r\n        Router.router.query = queryObj\r\n      } */\n\n      Router.push({\n        pathname: Router.router.pathname,\n        query: queryObj\n      }, {\n        pathname: asPath,\n        query: queryObj\n      }, {\n        shallow: shallow\n      });\n    }\n  }]);\n\n  return Route;\n}();\n\n_defineProperty(Route, \"getSidebarSelecteds\", function (routeName, routes) {\n  var routePaths = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var sidebarSelectedName = routeConfig[routeName] ? routeConfig[routeName].sidebar : undefined;\n  if (!routes) routes = sidebar;\n\n  var _iterator = _createForOfIteratorHelper(routes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _route = _step.value;\n\n      if (_route.routeName === sidebarSelectedName) {\n        routePaths.push(_route);\n        return routePaths;\n      } else if (_route.children) {\n        var result = Route.getSidebarSelecteds(sidebarSelectedName, _route.children, [].concat(_toConsumableArray(routePaths), [_route]));\n        if (result && result.length) return result;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return [];\n});\n\n_defineProperty(Route, \"getBreadcrumbs\", function (routeName) {\n  var result = [];\n  var route = routeConfig[routeName] ? routeConfig[routeName] : undefined;\n\n  if (route) {\n    result.unshift(route);\n\n    if (route.parent) {\n      result = [].concat(_toConsumableArray(Route.getBreadcrumbs(route.parent)), _toConsumableArray(result));\n    }\n  }\n\n  return result;\n});\n\nvar route = Route.makeUrl;\nvar addQuery = Route.addQuery;\nvar getBreadcrumbs = Route.getBreadcrumbs;\nvar getSidebarSelecteds = Route.getSidebarSelecteds;\nexport default route;\nexport { route, addQuery, getBreadcrumbs, getSidebarSelecteds };","map":{"version":3,"sources":["E:/DATN/salonadmin/themes/route.js"],"names":["UrlPattern","require","queryString","Router","routeConfig","sidebar","Route","name","params","routeInfo","Error","pattern","url","query","stringify","asUrl","href","action","substr","indexOf","as","e","shallow","asPath","window","location","pathname","oldQuery","router","queryObj","JSON","queryStringAppend","push","routeName","routes","routePaths","sidebarSelectedName","undefined","route","children","result","getSidebarSelecteds","length","unshift","parent","getBreadcrumbs","makeUrl","addQuery"],"mappings":"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","sourcesContent":["const UrlPattern = require('url-pattern');\r\nconst queryString = require('query-string');\r\n\r\nimport Router from 'next/router';\r\nimport routeConfig from './_routes'\r\nimport sidebar from './sidebar'\r\nclass Route {\r\n    static makeUrl(name, params) {\r\n        let routeInfo = routeConfig[name]\r\n        if (!routeInfo) {\r\n            //console.error(`Route ${name} not found`)\r\n            throw Error(`Route ${name} not found`);\r\n        }\r\n        let pattern = new UrlPattern(routeInfo.url);\r\n        let query = queryString.stringify(params)\r\n        try {\r\n            let asUrl = pattern.stringify(params) //link hiển thị trên trình duyệt\r\n            let href = asUrl //link thật trong /pages\r\n            if (routeInfo.action.substr(0, 6) === \"pages/\") {\r\n                href = routeInfo.action.substr(5)\r\n                if (href.indexOf('?') === -1) {\r\n                    href += `?${query}`\r\n                } else {\r\n                    href += `&${query}`\r\n                }\r\n            }\r\n            return {\r\n                as: asUrl,\r\n                href: href\r\n            }\r\n\r\n        } catch (e) {\r\n            //console.error(e)\r\n            throw e;\r\n        }\r\n    }\r\n\r\n    static addQuery(query, shallow = true) {\r\n        if (!process.browser) return;\r\n        let asPath = window.location.pathname\r\n        let oldQuery = Router.router.query\r\n        let queryObj = {\r\n            ...oldQuery,\r\n            ...query\r\n        }\r\n        if (JSON.stringify(queryObj) == JSON.stringify(oldQuery)) return;\r\n        let queryStringAppend = queryString.stringify(queryObj)\r\n            /* if(queryStringAppend){\r\n              Router.push({\r\n                pathname: Router.router.pathname,\r\n                query: queryObj,\r\n              }, {\r\n                pathname: asPath,\r\n                query: queryObj\r\n              }, {\r\n                shallow: shallow,\r\n              })\r\n              Router.router.query = queryObj\r\n            } */\r\n        Router.push({\r\n            pathname: Router.router.pathname,\r\n            query: queryObj,\r\n        }, {\r\n            pathname: asPath,\r\n            query: queryObj\r\n        }, {\r\n            shallow: shallow,\r\n        })\r\n    }\r\n\r\n    static getSidebarSelecteds = (routeName, routes, routePaths = []) => {\r\n        let sidebarSelectedName = routeConfig[routeName] ? routeConfig[routeName].sidebar : undefined\r\n        if (!routes) routes = sidebar\r\n        for (let route of routes) {\r\n            if (route.routeName === sidebarSelectedName) {\r\n                routePaths.push(route)\r\n\r\n                return routePaths\r\n            } else if (route.children) {\r\n                let result = this.getSidebarSelecteds(sidebarSelectedName, route.children, [...routePaths, route])\r\n                if (result && result.length) return result\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n\r\n    static getBreadcrumbs = (routeName) => {\r\n        let result = []\r\n        const route = routeConfig[routeName] ? routeConfig[routeName] : undefined\r\n        if (route) {\r\n            result.unshift(route);\r\n\r\n            if (route.parent) {\r\n                result = [...this.getBreadcrumbs(route.parent), ...result]\r\n            }\r\n        }\r\n        return result\r\n    }\r\n\r\n}\r\nconst route = Route.makeUrl\r\nconst addQuery = Route.addQuery\r\nconst getBreadcrumbs = Route.getBreadcrumbs\r\nconst getSidebarSelecteds = Route.getSidebarSelecteds\r\nexport default route;\r\nexport {\r\n    route,\r\n    addQuery,\r\n    getBreadcrumbs,\r\n    getSidebarSelecteds\r\n}"]},"metadata":{},"sourceType":"module"}