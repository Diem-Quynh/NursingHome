{"version":3,"sources":["webpack:///./node_modules/@ant-design/icons-svg/es/asn/LeftCircleFilled.js","webpack:///./node_modules/@ant-design/icons/es/icons/LeftCircleFilled.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/SaveFilled.js","webpack:///./node_modules/@ant-design/icons/es/icons/SaveFilled.js","webpack:///./themes/services/api/UserGroupPermissionService.ts","webpack:///./pages/admin/userGroups/role.tsx","webpack:///./themes/services/api/UserPermissionService.ts","webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?6d08"],"names":["props","ref","AntdIcon","Object","assign","icon","displayName","UserGroupPermission","context","name","data","url","this","route","href","Request","put","result","BaseApi","Role","Typography","Title","Text","permissionCategories","groupId","groupName","useBaseHook","t","notify","redirect","router","useState","loading","setLoading","userGroupPermissionService","UserGroupPermissionService","onFinish","values","a","to","update","permissions","error","code","message","renderCheckbox","row","permission","checked","value","disabled","avalibleValue","defaultChecked","onChange","e","target","key","className","style","fontSize","marginBottom","map","g","category","columns","title","width","dataIndex","render","size","id","dataSource","pagination","renderPermissionCategory","marginTop","textAlign","onClick","back","marginRight","LeftCircleFilled","type","htmlType","SaveFilled","getInitialProps","ctx","userPermissionService","UserPermissionService","query","getByGroupId","namespacesRequired","UserPermission","get","window","__NEXT_P","push"],"mappings":"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","file":"static\\3bqcv_cRHHIBfHp_4lMA9\\pages\\admin\\userGroups\\role.js","sourcesContent":["// This icon file is generated automatically.\nvar LeftCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm104 316.9c0 10.2-4.9 19.9-13.2 25.9L457.4 512l145.4 105.2c8.3 6 13.2 15.6 13.2 25.9V690c0 6.5-7.4 10.3-12.7 6.5l-246-178a7.95 7.95 0 010-12.9l246-178a8 8 0 0112.7 6.5v46.8z\" } }] }, \"name\": \"left-circle\", \"theme\": \"filled\" };\nexport default LeftCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LeftCircleFilledSvg from \"@ant-design/icons-svg/es/asn/LeftCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LeftCircleFilled = function LeftCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LeftCircleFilledSvg\n  }));\n};\n\nLeftCircleFilled.displayName = 'LeftCircleFilled';\nexport default React.forwardRef(LeftCircleFilled);","// This icon file is generated automatically.\nvar SaveFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z\" } }] }, \"name\": \"save\", \"theme\": \"filled\" };\nexport default SaveFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SaveFilledSvg from \"@ant-design/icons-svg/es/asn/SaveFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SaveFilled = function SaveFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SaveFilledSvg\n  }));\n};\n\nSaveFilled.displayName = 'SaveFilled';\nexport default React.forwardRef(SaveFilled);","import BaseApi from './BaseService'\r\n\r\nclass UserGroupPermission extends BaseApi {\r\n  constructor(context?: Context){\r\n    super(context)\r\n    this.name = 'userGroupPermissions'; //kế thừa CRUD từ thằng cha\r\n  }\r\n  async update(data: any){\r\n    const url = this.route(`api.${this.name}.update`).href\r\n    let result = await this.Request.put(url, data)\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default UserGroupPermission","import ConfirmDialog from 'themes/components/Dialogs/ConfirmDialog';\r\n\r\nimport React, { useState } from 'react'\r\nimport Layout from 'themes/layouts/Admin'\r\nimport { Button, Row, Col, Form, Input, Select, Typography, Checkbox } from 'antd';\r\nimport { Table } from 'antd';\r\nimport { AppstoreOutlined, MailOutlined, SettingOutlined } from '@ant-design/icons';\r\nimport UserPermissionService from 'themes/services/api/UserPermissionService';\r\nimport UserGroupPermissionService from 'themes/services/api/UserGroupPermissionService';\r\nimport _ from 'lodash';\r\nimport to from 'await-to-js'\r\nimport useBaseHook from 'themes/hooks/BaseHooks'\r\nimport { LeftCircleFilled, SaveFilled, DeleteFilled } from '@ant-design/icons';\r\nimport BreadCrumb from 'themes/components/Breadcumb'\r\nimport { getInputClassName } from 'antd/lib/input/Input';\r\nconst { Title, Text } = Typography;\r\n\r\nconst Role = ({ permissionCategories, groupId, groupName }: { permissionCategories: PermissionCategories[], groupId: number, groupName: string }) => {\r\n  let result: any = {}\r\n  const { t, notify, redirect, router } = useBaseHook();\r\n  const [loading, setLoading] = useState(false);\r\n  const userGroupPermissionService = new UserGroupPermissionService()\r\n  const onFinish = async (values: any): Promise<void> => {\r\n    setLoading(true)\r\n    let [error, result]: any[] = await to(userGroupPermissionService.update({\r\n      permissions: values,\r\n      groupId: groupId\r\n    }));\r\n    setLoading(false)\r\n\r\n    if (error) {\r\n      return notify(t(`errors:${error.code}`), t(error.message), 'error')\r\n    }\r\n    notify(t(\"message.recordCreated\"))\r\n    redirect(\"frontend.admin.userGroups.index\")\r\n  }\r\n\r\n  const renderCheckbox = (row: any, permission: number) => {\r\n    function onChange(e: any) {\r\n      e.target.checked ? row.value += permission : row.value -= permission;\r\n      result[row.key] = row.value\r\n    }\r\n    const checked = (row.value & permission) === permission\r\n    const disabled = (row.avalibleValue & permission) !== permission\r\n    return <Checkbox defaultChecked={checked} disabled={disabled} onChange={onChange}></Checkbox>\r\n  }\r\n\r\n  const renderPermissionCategory = (category: any) => {\r\n    const columns = [\r\n      {\r\n        title: \"#\",\r\n        // dataIndex: 'id',\r\n        key: 'id',\r\n        width: '5%',\r\n      },\r\n      {\r\n        title: category.name,\r\n        // dataIndex: 'name',\r\n        key: 'name',\r\n\r\n      },\r\n      {\r\n        title: t(\"create\"),\r\n        dataIndex: 'value',\r\n        key: 'valueC',\r\n        width: '10%',\r\n        render: (value: any, row: any) => renderCheckbox(row, 8)\r\n      },\r\n      {\r\n        title: t(\"view\"),\r\n        dataIndex: 'value',\r\n        key: 'valueR',\r\n        width: '10%',\r\n        render: (value: any, row: any) => renderCheckbox(row, 4)\r\n      },\r\n      {\r\n        title: t(\"edit\"),\r\n        dataIndex: 'value',\r\n        key: 'valueU',\r\n        width: '10%',\r\n        render: (value: any, row: any) => renderCheckbox(row, 2)\r\n      },\r\n      {\r\n        title: t(\"delete\"),\r\n        dataIndex: 'value',\r\n        key: 'valueD',\r\n        width: '10%',\r\n        render: (value: any, row: any) => renderCheckbox(row, 1)\r\n      }\r\n    ];\r\n    return <Table size=\"small\" key={category.id} columns={columns} dataSource={[category]} pagination={false} />\r\n  }\r\n  return <Layout>\r\n    <div className=\"content\">\r\n      <div style={{ fontSize: \"17px\", marginBottom: \"15px\" }}>{t('group')}: { groupName }</div>\r\n      {permissionCategories.map((g: any) => renderPermissionCategory(g))}\r\n      <div style={{ marginTop: \"24px\", textAlign: \"center\"}}>\r\n        <Button onClick={() => router.back()} style={{ marginRight: 8 }}>\r\n          <LeftCircleFilled /> {t('cancel')}\r\n        </Button>\r\n        <Button onClick={() => onFinish(result)} type=\"primary\" htmlType=\"submit\" loading={loading} style={{ marginRight: 8 }}>\r\n          <SaveFilled /> {t('submit')}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n\r\n  </Layout>\r\n}\r\n\r\nRole.getInitialProps = async (ctx: any) => {\r\n  const userPermissionService = new UserPermissionService(ctx)\r\n  const query = ctx.query;\r\n  let error: any;\r\n\r\n  if (!query.id) {\r\n    error = {\r\n      code: 9996,\r\n      message: 'missing ID'\r\n    }\r\n  }\r\n\r\n  let [permissionError, permissionCategories] = await to(userPermissionService.getByGroupId({ groupId: query.id }));\r\n  return {\r\n    namespacesRequired: ['common', 'pages', 'menu','errors'],\r\n    error: error,\r\n    permissionCategories: permissionCategories,\r\n    groupId: query.id,\r\n    groupName: query.name\r\n  }\r\n}\r\nRole.permissions = {\r\n  \"root\": \"U\"\r\n}\r\nexport default Role","import BaseApi from './BaseService'\r\nimport { group } from 'console';\r\n\r\nclass UserPermission extends BaseApi {\r\n  constructor(context?: Context){\r\n    super(context)\r\n    this.name = 'userPermissions'; //kế thừa CRUD từ thằng cha\r\n  }\r\n  async getByGroupId(data: {groupId: number}){\r\n    const url = this.route(`api.${this.name}.getByGroupId`, data).href\r\n    let result = await this.Request.get(url, data)\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default UserPermission","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/userGroups/role\",\n      function () {\n        return require(\"private-next-pages/admin/userGroups/role.tsx\");\n      }\n    ]);\n  "],"sourceRoot":""}