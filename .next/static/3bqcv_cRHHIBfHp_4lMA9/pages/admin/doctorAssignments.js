(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"4s5y":function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),a=n.n(r),o=n("ODXe"),c=n("HaE+"),s=n("dk5U"),i=n("ihUu"),u=n("jz6S"),d=n("2/Rp"),f=n("tkEX"),l=n("FxId"),m=n("q1tI"),p=n.n(m),g=n("38j0"),b=n("6nNS"),h=n("w5pM"),w=n("/MfK"),y=p.a.createElement,v=function(t){return t=(t=t?String(t):"").substr(0,10),"".concat(t)},j=function(t){var e=t.doctorAssigns,n=t.total,r=Object(g.a)(),j=r.t,O=r.notify,k=r.redirect,x=(r.setStore,r.getAuth,r.getStore,Object(m.useState)(!0)),A=x[0],R=x[1],E=Object(m.useState)([]),S=E[0],D=E[1],C=new f.a,I=p.a.createRef(),X=p.a.createRef(),N=Object(b.a)().checkPermission,_=N({"admin.doctorAssignments":"C"}),P=N({"admin.doctorAssignment":"D"}),B=[{title:j("doctor"),dataIndex:"fullname",key:"users.fullname",sorter:!0,filterable:!0,render:function(t,e){return y("a",{onClick:function(){return k("frontend.admin.doctorAssignments.edit",{id:e.id})}},e.doctorCode," - ",e.fullname)}},{title:j("room"),dataIndex:"roomCode",key:"roomCode",sorter:!0,filterable:!0,width:"15%"},{title:j("doctorAssignments.dateBegin"),dataIndex:"dateBegin",key:"dateBegin",sorter:!0,filterDate:!0,width:"15%",render:function(t,e){return y("div",null,v(t))}},{title:j("doctorAssignments.dateEnd"),dataIndex:"dateEnd",key:"dateEnd",sorter:!0,filterDate:!0,width:"15%",render:function(t,e){return y("div",null,v(t))}},{title:j("note"),dataIndex:"note",key:"note"}],K=function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,c,s,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(C.index(e));case 2:if(n=t.sent,r=Object(o.a)(n,2),c=r[0],s=r[1],!c){t.next=10;break}return i=c.code,u=c.message,O(j("errors:".concat(i)),j(u),"error"),t.abrupt("return",{});case 10:return t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(c.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(C.delete({ids:S}));case 2:if(e=t.sent,n=Object(o.a)(e,2),r=n[0],n[1],!r){t.next=8;break}return t.abrupt("return",O(j("errors:".concat(r.code)),j("".concat(r.message)),"error"));case 8:O(j("message.recordDeleted")),null!==X.current&&X.current.reload(),D([]),R(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return y(s.a,null,y("div",{className:"content"},y(d.a,{hidden:!_,onClick:function(){return k("frontend.admin.doctorAssignments.create")},type:"primary",className:"btn-top"},y(h.a,null),j("create")),y(d.a,{danger:!0,onClick:function(){I.current&&I.current.show()},className:"btn-top",hidden:A||!P},y(w.a,null),j("delete")),y(i.a,{ref:X,columns:B,data:e,rowSelection:{selectedRowKeys:S,onChange:function(t){return function(t){t.length>0?R(!1):R(!0),D(t)}(t)}},fetchData:K,total:n}),y(u.a,{ref:I,onSubmit:q,title:j("deleteItem"),content:j("message.deleteConfirm")})))};j.getInitialProps=function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,c,s,u,d,m,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new f.a(e),r={filters:[],sorting:[]},c=e.query,s=i.b.getOptions(c,r),t.next=6,Object(l.a)(n.index(s));case 6:return u=t.sent,d=Object(o.a)(u,2),m=d[0],p=d[1],t.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:m,doctorAssigns:g.a.getData(p,"data",[]),total:g.a.getData(p,"total",0),defaultQuery:{filters:i.b.makeQuery(s)}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j.permissions={"admin.doctorAssignments":"R","doctor.doctorAssignments":"R","admin.users.doctorAssignments":"R"},e.default=j},KgEX:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/doctorAssignments",function(){return n("4s5y")}])},tkEX:function(t,e,n){"use strict";var r=n("1OyB"),a=n("Ji7U"),o=n("md7G"),c=n("foSv");function s(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(c.a)(t);if(e){var a=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var i=function(t){Object(a.a)(n,t);var e=s(n);function n(t){var a;return Object(r.a)(this,n),(a=e.call(this,t)).name="doctorAssignments",a}return n}(n("zjTY").a);e.a=i}},[["KgEX",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=doctorAssignments.js.map