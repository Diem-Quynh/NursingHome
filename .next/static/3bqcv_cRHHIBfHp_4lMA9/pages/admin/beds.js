(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{o1QN:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),o=n("ODXe"),c=n("HaE+"),u=n("dk5U"),s=n("ihUu"),i=n("jz6S"),d=n("2/Rp"),l=n("J6f/"),f=n("FxId"),b=n("q1tI"),p=n.n(b),m=n("38j0"),w=n("6nNS"),h=n("w5pM"),k=n("/MfK"),v=p.a.createElement,j=function(e){var t=e.beds,n=e.total,r=Object(m.a)(),j=r.t,y=r.notify,O=r.redirect,g=(r.setStore,r.getAuth,r.getStore,Object(b.useState)(!0)),x=g[0],I=g[1],C=Object(b.useState)([]),N=C[0],S=C[1],D=new l.a,R=p.a.createRef(),_=p.a.createRef(),E=Object(w.a)().checkPermission,K=E({"admin.beds":"C"}),P=E({"admin.beds":"D"}),Q=[{title:j("room"),dataIndex:"roomCode",key:"roomCode",sorter:!0,filterable:!0,width:"20%",render:function(e,t){return v("a",{onClick:function(){return O("frontend.admin.beds.edit",{id:t.id})}},t.roomCode)}},{title:j("beds.bedId"),dataIndex:"bedId",key:"bedId",width:"20%"},{title:j("status"),dataIndex:"status",sorter:!0,filterCheck:!0,options:[{label:j("beds.empty"),value:0},{label:j("beds.full"),value:1}],key:"status",width:"20%",render:function(e,t){return v("div",null,function(e){var t=Object(m.a)().t;return e=t(0==(e=Math.round(Number(e)))?"beds.empty":"beds.full"),"".concat(e)}(e))}},{title:j("note"),dataIndex:"note",key:"note"}],q=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(D.index(t));case 2:if(n=e.sent,r=Object(o.a)(n,2),c=r[0],u=r[1],!c){e.next=10;break}return s=c.code,i=c.message,y(j("errors:".concat(s)),j(i),"error"),e.abrupt("return",{});case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(D.delete({ids:N}));case 2:if(t=e.sent,n=Object(o.a)(t,2),r=n[0],n[1],!r){e.next=8;break}return e.abrupt("return",y(j("errors:".concat(r.code)),j("".concat(r.message)),"error"));case 8:y(j("message.recordDeleted")),null!==_.current&&_.current.reload(),S([]),I(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v(u.a,null,v("div",{className:"content"},v(d.a,{hidden:!K,onClick:function(){return O("frontend.admin.beds.create")},type:"primary",className:"btn-top"},v(h.a,null),j("create")),v(d.a,{danger:!0,onClick:function(){R.current&&R.current.show()},className:"btn-top",hidden:x||!P},v(k.a,null),j("delete")),v(s.a,{ref:_,columns:Q,data:t,rowSelection:{selectedRowKeys:N,onChange:function(e){return function(e){e.length>0?I(!1):I(!0),S(e)}(e)}},fetchData:q,total:n}),v(i.a,{ref:R,onSubmit:A,title:j("deleteItem"),content:j("message.deleteConfirm")})))};j.getInitialProps=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u,i,d,b,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.a(t),r={filters:[],sorting:[]},c=t.query,u=s.b.getOptions(c,r),e.next=6,Object(f.a)(n.index(u));case 6:return i=e.sent,d=Object(o.a)(i,2),b=d[0],p=d[1],e.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:b,beds:m.a.getData(p,"data",[]),total:m.a.getData(p,"total",0),defaultQuery:{filters:s.b.makeQuery(u)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j.permissions={"admin.beds":"R"},t.default=j},vKAY:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/beds",function(){return n("o1QN")}])}},[["vKAY",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=beds.js.map