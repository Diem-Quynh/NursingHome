(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"2b5P":function(e,t,r){"use strict";var n=r("1OyB"),a=r("Ji7U"),o=r("md7G"),c=r("foSv");function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var i=function(e){Object(a.a)(r,e);var t=u(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).name="rooms",a}return r}(r("zjTY").a);t.a=i},cCUr:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/rooms",function(){return r("gy+H")}])},"gy+H":function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),o=r("ODXe"),c=r("HaE+"),u=r("dk5U"),i=r("ihUu"),s=r("jz6S"),d=r("2/Rp"),f=r("2b5P"),l=r("FxId"),m=r("q1tI"),p=r.n(m),b=r("38j0"),h=r("6nNS"),w=r("w5pM"),y=r("/MfK"),j=p.a.createElement,O=function(e){var t=e.rooms,r=e.total,n=Object(b.a)(),O=n.t,v=n.notify,g=n.redirect,k=(n.setStore,n.getAuth,n.getStore,Object(m.useState)(!0)),x=k[0],R=k[1],S=Object(m.useState)([]),N=S[0],C=S[1],D=new f.a,I=p.a.createRef(),P=p.a.createRef(),_=Object(h.a)().checkPermission,U=_({"admin.rooms":"C"}),E=_({"admin.rooms":"D"}),q=[{title:O("code"),dataIndex:"code",key:"code",width:"20%",sorter:!0,filterable:!0,render:function(e,t){return j("a",{onClick:function(){return g("frontend.admin.rooms.edit",{id:t.id})}},t.code)}},{title:O("rooms.bedNumber"),dataIndex:"bedNumber",key:"bedNumber",width:"20%",sorter:!0},{title:O("note"),dataIndex:"note",key:"note"}],H=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,u,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(D.index(t));case 2:if(r=e.sent,n=Object(o.a)(r,2),c=n[0],u=n[1],!c){e.next=10;break}return i=c.code,s=c.message,v(O("errors:".concat(i)),O(s),"error"),e.abrupt("return",{});case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(D.delete({ids:N}));case 2:if(t=e.sent,r=Object(o.a)(t,2),n=r[0],r[1],!n){e.next=8;break}return e.abrupt("return",v(O("errors:".concat(n.code)),O("".concat(n.message)),"error"));case 8:v(O("message.recordDeleted")),null!==P.current&&P.current.reload(),C([]),R(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j(u.a,null,j("div",{className:"content"},j(d.a,{hidden:!U,onClick:function(){return g("frontend.admin.rooms.create")},type:"primary",className:"btn-top"},j(w.a,null),O("create")),j(d.a,{danger:!0,onClick:function(){I.current&&I.current.show()},className:"btn-top",hidden:x||!E},j(y.a,null),O("delete")),j(i.a,{ref:P,columns:q,data:t,rowSelection:{selectedRowKeys:N,onChange:function(e){return function(e){e.length>0?R(!1):R(!0),C(e)}(e)}},fetchData:H,total:r}),j(s.a,{ref:I,onSubmit:J,title:O("deleteItem"),content:O("message.deleteConfirm")})))};O.getInitialProps=function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n,c,u,s,d,m,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.a(t),n={filters:[],sorting:[]},c=t.query,u=i.b.getOptions(c,n),e.next=6,Object(l.a)(r.index(u));case 6:return s=e.sent,d=Object(o.a)(s,2),m=d[0],p=d[1],e.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:m,rooms:b.a.getData(p,"data",[]),total:b.a.getData(p,"total",0),defaultQuery:{filters:i.b.makeQuery(u)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O.permissions={"admin.rooms":"R"},t.default=O}},[["cCUr",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=rooms.js.map