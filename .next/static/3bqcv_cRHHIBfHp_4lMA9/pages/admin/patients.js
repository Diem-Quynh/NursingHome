(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"6W5+":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/patients",function(){return n("Xopa")}])},Xopa:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),i=n("ODXe"),o=n("HaE+"),d=n("dk5U"),c=n("ihUu"),u=n("jz6S"),s=n("2/Rp"),l=n("MXRd"),f=n("FxId"),p=n("q1tI"),m=n.n(p),b=n("38j0"),y=n("6nNS"),h=n("w5pM"),x=n("/MfK"),k=m.a.createElement,w=function(e){return e=(e=e?String(e):"").substr(0,10),"".concat(e)},I=function(e){var t=e.patients,n=e.total,r=Object(b.a)(),I=r.t,v=r.notify,g=r.redirect,O=(r.setStore,r.getAuth,r.getStore,Object(p.useState)(!0)),j=O[0],C=O[1],R=Object(p.useState)([]),D=R[0],S=R[1],N=new l.a,X=m.a.createRef(),_=m.a.createRef(),E=Object(y.a)().checkPermission,H=E({"admin.patients":"C","receptionist.patients":"C"}),M=E({"admin.patients":"D"}),P=[{title:I("patient"),dataIndex:"code",key:"code",filterable:!0,fixed:"left"},{title:I("fullname"),dataIndex:"fullname",key:"fullname",sorter:!0,filterable:!0,fixed:"left",render:function(e,t){return k("a",{onClick:function(){return g("frontend.admin.patients.edit",{id:t.id})}},t.fullname)}},{title:I("room"),dataIndex:"roomCode",sorter:!0,filterable:!0,key:"beds.roomCode",fixed:"left",render:function(e,t){return k("div",null,t.roomCode," - ",t.bedCode)}},{title:I("birthday"),dataIndex:"birthday",key:"birthday",filterDate:!0,render:function(e,t){return k("div",null,w(e))}},{title:I("gender"),dataIndex:"gender",key:"gender",filterCheck:!0,options:[{label:I("male"),value:0},{label:I("female"),value:1}],width:"7%",render:function(e,t){return k("div",null,function(e){var t=Object(b.a)().t;return e=t(0==(e=Math.round(Number(e)))?"male":"female"),"".concat(e)}(e))}},{title:I("address"),dataIndex:"address",key:"address",filterable:!0},{title:I("cardId"),dataIndex:"cardId",key:"cardId",filterable:!0},{title:I("phone"),dataIndex:"phone",key:"phone",filterable:!0},{title:I("patients.medicalHistory"),dataIndex:"medicalHistory",key:"medicalHistory",filterable:!0},{title:I("patients.dateIn"),dataIndex:"dateIn",sorter:!0,filterDate:!0,key:"dateIn",render:function(e,t){return k("div",null,w(e))}},{title:I("patients.dateOut"),dataIndex:"dateOut",sorter:!0,filterDate:!0,key:"dateOut",render:function(e,t){return k("div",null,w(e))}}],q=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,d,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(N.index(t));case 2:if(n=e.sent,r=Object(i.a)(n,2),o=r[0],d=r[1],!o){e.next=10;break}return c=o.code,u=o.message,v(I("errors:".concat(c)),I(u),"error"),e.abrupt("return",{});case 10:return e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(N.delete({ids:D}));case 2:if(t=e.sent,n=Object(i.a)(t,2),r=n[0],n[1],!r){e.next=8;break}return e.abrupt("return",v(I("errors:".concat(r.code)),I("".concat(r.message)),"error"));case 8:v(I("message.recordDeleted")),null!==_.current&&_.current.reload(),S([]),C(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k(d.a,null,k("div",{className:"content"},k(s.a,{hidden:!H,onClick:function(){return g("frontend.admin.patients.create")},type:"primary",className:"btn-top"},k(h.a,null),I("create")),k(s.a,{danger:!0,onClick:function(){X.current&&X.current.show()},className:"btn-top",hidden:j||!M},k(x.a,null),I("delete")),k(c.a,{ref:_,columns:P,data:t,rowSelection:{selectedRowKeys:D,onChange:function(e){return function(e){e.length>0?C(!1):C(!0),S(e)}(e)}},fetchData:q,total:n,scroll:{x:1400}}),k(u.a,{ref:X,onSubmit:J,title:I("deleteItem"),content:I("message.deleteConfirm")})))};I.getInitialProps=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,d,u,s,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.a(t),r={filters:[],sorting:[]},o=t.query,d=c.b.getOptions(o,r),e.next=6,Object(f.a)(n.index(d));case 6:return u=e.sent,s=Object(i.a)(u,2),p=s[0],m=s[1],e.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:p,patients:b.a.getData(m,"data",[]),total:b.a.getData(m,"total",0),defaultQuery:{filters:c.b.makeQuery(d)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I.permissions={"admin.patients":"R","doctor.patients":"R","nurse.patients":"R","receptionist.patients":"R"},t.default=I}},[["6W5+",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=patients.js.map