(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"+y9g":function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),i=r("ODXe"),u=r("HaE+"),s=r("dk5U"),c=r("ihUu"),o=r("jz6S"),l=r("kaz8"),d=r("2/Rp"),f=r("Vewq"),p=r("FxId"),m=r("q1tI"),b=r.n(m),h=r("38j0"),v=r("6nNS"),y=r("w5pM"),w=r("/MfK"),k=b.a.createElement,g=function(e){var t=e.permissions,r=e.total,n=Object(h.a)(),g=n.t,j=n.notify,O=n.redirect,x=(n.setStore,n.getAuth,n.getStore,Object(m.useState)(!0)),I=x[0],R=x[1],P=Object(m.useState)([]),S=P[0],D=P[1],N=new f.a,_=b.a.createRef(),q=b.a.createRef(),C=Object(v.a)().checkPermission,E=C({root:"C"}),U=C({root:"D"}),V=function(e,t){var r=(e.avalibleValue&t)===t;return k(l.a,{defaultChecked:r,disabled:!0})},z=[{title:g("userPermissions.key"),dataIndex:"keyName",key:"user_permissions.key",width:"18%",filterable:!0,sorter:!0,render:function(e,t){return k("a",{onClick:function(){return O("frontend.admin.userPermissions.edit",{id:t.id})}},t.keyName)}},{title:g("userPermissions.name"),dataIndex:"name",key:"user_permissions.name",filterable:!0},{title:g("group"),dataIndex:"groupName",key:"user_groups.name",sorter:!0,filterable:!0},{title:g("description"),dataIndex:"description",key:"description"},{title:g("userPermissions.avalibleValue"),children:[{title:g("create"),dataIndex:"value",key:"valueC",width:"6%",render:function(e,t){return V(t,8)}},{title:g("view"),dataIndex:"value",key:"valueR",width:"5%",render:function(e,t){return V(t,4)}},{title:g("edit"),dataIndex:"value",key:"valueU",width:"5%",render:function(e,t){return V(t,2)}},{title:g("delete"),dataIndex:"value",key:"valueD",width:"5%",render:function(e,t){return V(t,1)}}]}],B=function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,u,s,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(N.index(t));case 2:if(r=e.sent,n=Object(i.a)(r,2),u=n[0],s=n[1],!u){e.next=10;break}return c=u.code,o=u.message,j(g("errors:".concat(c)),g(o),"error"),e.abrupt("return",{});case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(N.delete({ids:S}));case 2:if(t=e.sent,r=Object(i.a)(t,2),n=r[0],r[1],!n){e.next=8;break}return e.abrupt("return",j(g("errors:".concat(n.code)),g("".concat(n.message)),"error"));case 8:j(g("message.recordDeleted")),null!==q.current&&q.current.reload(),D([]),R(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k(s.a,null,k("div",{className:"content",id:"permission"},k(d.a,{hidden:!E,onClick:function(){return O("frontend.admin.userPermissions.create")},type:"primary",className:"btn-top"},k(y.a,null),g("create")),k(d.a,{danger:!0,onClick:function(){_.current&&_.current.show()},className:"btn-top",hidden:I||!U},k(w.a,null),g("delete")),k(c.a,{ref:q,columns:z,data:t,rowSelection:{selectedRowKeys:S,onChange:function(e){return function(e){e.length>0?R(!1):R(!0),D(e)}(e)}},fetchData:B,total:r}),k(o.a,{ref:_,onSubmit:G,title:g("deleteItem"),content:g("message.deleteConfirm")})))};g.getInitialProps=function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,u,s,o,l,d,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.a(t),n={filters:[],sorting:[]},u=t.query,s=c.b.getOptions(u,n),e.next=6,Object(p.a)(r.index(s));case 6:return o=e.sent,l=Object(i.a)(o,2),d=l[0],m=l[1],e.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:d,permissions:h.a.getData(m,"data",[]),total:h.a.getData(m,"total",0),defaultQuery:{filters:c.b.makeQuery(s)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.permissions={root:"R"},t.default=g},Vewq:function(e,t,r){"use strict";var n=r("o0o1"),a=r.n(n),i=r("HaE+"),u=r("1OyB"),s=r("vuIU"),c=r("Ji7U"),o=r("md7G"),l=r("foSv");function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(o.a)(this,r)}}var f=function(e){Object(c.a)(r,e);var t=d(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).name="userPermissions",n}return Object(s.a)(r,[{key:"getByGroupId",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.route("api.".concat(this.name,".getByGroupId"),t).href,e.next=3,this.Request.get(r,t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(r("zjTY").a);t.a=f},qW1l:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/userPermissions",function(){return r("+y9g")}])}},[["qW1l",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=userPermissions.js.map