(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"UO+j":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return r("eAja")}])},eAja:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),i=r("ODXe"),u=r("HaE+"),c=r("dk5U"),o=r("ihUu"),s=r("jz6S"),d=r("2/Rp"),l=r("3PWm"),f=r("FxId"),p=r("q1tI"),m=r.n(p),b=r("38j0"),h=r("6nNS"),w=r("w5pM"),x=r("/MfK"),k=m.a.createElement,y=function(e){var t=e.users,r=e.total,n=Object(b.a)(),y=n.t,g=n.notify,j=n.redirect,v=(n.setStore,n.getAuth,n.getStore,Object(p.useState)(!0)),I=v[0],O=v[1],S=Object(p.useState)([]),N=S[0],C=S[1],D=new l.a,_=m.a.createRef(),R=m.a.createRef(),P=Object(h.a)().checkPermission,E=P({"admin.users":"C"}),U=P({"admin.users":"D"}),q=[{title:y("code"),dataIndex:"code",key:"code",filterable:!0,width:"100px",render:function(e,t){return k("a",{onClick:function(){return j("frontend.admin.users.edit",{id:t.id})}},t.code)},fixed:"left"},{title:y("name"),dataIndex:"fullname",key:"fullname",filterable:!0,sorter:!0,fixed:"left"},{title:y("position"),dataIndex:"position",key:"position",filterable:!0,width:"8%"},{title:y("userGroup"),dataIndex:"groupName",key:"user_groups.name",filterable:!0},{title:y("username"),dataIndex:"username",key:"username",filterable:!0},{title:y("birthday"),dataIndex:"birthday",key:"birthday",filterDate:!0,width:"7%",render:function(e,t){return k("div",null,(r=(r=(r=e)?String(r):"").substr(0,10),"".concat(r)));var r}},{title:y("gender"),dataIndex:"gender",key:"gender",filterCheck:!0,options:[{label:y("male"),value:0},{label:y("female"),value:1}],width:"6%",render:function(e,t){return k("div",null,function(e){var t=Object(b.a)().t;return e=t(0==(e=Math.round(Number(e)))?"male":"female"),"".concat(e)}(e))}},{title:y("address"),dataIndex:"address",key:"address"},{title:y("cardId"),dataIndex:"cardId",key:"cardId",filterable:!0},{title:y("phone"),dataIndex:"phone",key:"phone",filterable:!0},{title:y("email"),dataIndex:"email",key:"email",filterable:!0}],A=function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,u,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(D.index(t));case 2:if(r=e.sent,n=Object(i.a)(r,2),u=n[0],c=n[1],!u){e.next=10;break}return o=u.code,s=u.message,g(y("errors:".concat(o)),y(s),"error"),e.abrupt("return",{});case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(D.delete({ids:N}));case 2:if(t=e.sent,r=Object(i.a)(t,2),n=r[0],r[1],!n){e.next=8;break}return e.abrupt("return",g(y("errors:".concat(n.code)),y("".concat(n.message)),"error"));case 8:g(y("message.recordDeleted")),null!==R.current&&R.current.reload(),C([]),O(!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return k(c.a,null,k("div",{className:"content"},k(d.a,{hidden:!E,onClick:function(){return j("frontend.admin.users.create")},type:"primary",className:"btn-top"},k(w.a,null),y("create")),k(d.a,{danger:!0,onClick:function(){_.current&&_.current.show()},className:"btn-top",hidden:I||!U},k(x.a,null),y("delete")),k(o.a,{ref:R,columns:q,data:t,rowSelection:{selectedRowKeys:N,onChange:function(e){return function(e){e.length>0?O(!1):O(!0),C(e)}(e)}},fetchData:A,total:r,scroll:{x:1800}}),k(s.a,{ref:_,onSubmit:M,title:y("deleteItem"),content:y("message.deleteConfirm")})))};y.getInitialProps=function(){var e=Object(u.a)(a.a.mark((function e(t){var r,n,u,c,s,d,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new l.a(t),n={filters:[],sorting:[]},u=t.query,c=o.b.getOptions(u,n),e.next=6,Object(f.a)(r.index(c));case 6:return s=e.sent,d=Object(i.a)(s,2),p=d[0],m=d[1],e.abrupt("return",{namespacesRequired:["common","pages","menu","errors"],error:p,users:b.a.getData(m,"data",[]),total:b.a.getData(m,"total",0),defaultQuery:{filters:o.b.makeQuery(c)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y.permissions={"admin.users":"R"},t.default=y}},[["UO+j",1,2,3,5,0,4,6,7,8,9,10,11]]]);
//# sourceMappingURL=users.js.map