{"version":3,"sources":["webpack:///./pages/admin/userPermissions/create.tsx","webpack:///./node_modules/@ant-design/icons-svg/es/asn/LeftCircleFilled.js","webpack:///./node_modules/@ant-design/icons/es/icons/LeftCircleFilled.js","webpack:///./node_modules/@ant-design/icons-svg/es/asn/SaveFilled.js","webpack:///./node_modules/@ant-design/icons/es/icons/SaveFilled.js","webpack:///./themes/services/api/UserPermissionService.ts","webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?ab3b","webpack:///./themes/services/api/UserGroupService.ts"],"names":["Option","Typography","Title","Text","Select","formItemLayout","labelCol","xs","span","sm","wrapperCol","Create","groups","useBaseHook","t","notify","redirect","router","useState","loading","setLoading","Form","useForm","form","permissionService","UserPermissionService","result","avalibleValue","onFinish","values","a","to","create","error","code","message","className","name","initialValues","key","description","groupId","undefined","e","Object","assign","scrollToFirstError","Item","label","rules","required","showSearch","placeholder","filterOption","input","option","children","toLowerCase","indexOf","map","item","push","value","id","renderOption","checkbox","options","title","permission","defaultChecked","onChange","target","checked","renderCheckbox","style","textAlign","onClick","back","marginRight","type","htmlType","getInitialProps","ctx","groupService","UserGroupService","index","pageSize","namespacesRequired","_","get","permissions","props","ref","AntdIcon","icon","displayName","UserPermission","context","data","url","this","route","href","Request","BaseApi","window","__NEXT_P","UserGroups"],"mappings":"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","file":"static\\3bqcv_cRHHIBfHp_4lMA9\\pages\\admin\\userPermissions\\create.js","sourcesContent":["import React, { useState } from 'react'\r\nimport Layout from 'themes/layouts/Admin'\r\nimport { Button, Row, Col, Form, Input, Select, Typography, Checkbox } from 'antd';\r\nimport UserPermissionService from 'themes/services/api/UserPermissionService';\r\nimport UserGroupService from 'themes/services/api/UserGroupService';\r\nimport _ from 'lodash';\r\nimport to from 'await-to-js'\r\nimport useBaseHook from 'themes/hooks/BaseHooks'\r\nimport { LeftCircleFilled, SaveFilled } from '@ant-design/icons';\r\nimport BreadCrumb from 'themes/components/Breadcumb'\r\nconst { Title, Text } = Typography;\r\n\r\nconst { Option } = Select\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 4 },\r\n  },\r\n  wrapperCol: {\r\n    xs: { span: 24 },\r\n    sm: { span: 18 },\r\n  },\r\n};\r\n\r\n\r\nconst Create = ({ groups }: { groups: UserGroup[] }) => {\r\n  const { t, notify, redirect, router } = useBaseHook();\r\n  const [loading, setLoading] = useState(false);\r\n  const [form] = Form.useForm();\r\n  const permissionService = new UserPermissionService()\r\n\r\n  // save avalibleValue of permission\r\n  let result: any = {avalibleValue: 0}\r\n\r\n  //submit form\r\n  const onFinish = async (values: any): Promise<void> => {\r\n    setLoading(true)\r\n    let [error, result]: any[] = await to(permissionService.create(values));\r\n    setLoading(false)\r\n\r\n    if (error) {\r\n      return notify(t(`errors:${error.code}`), t(error.message), 'error')\r\n    }\r\n    notify(t(\"message.recordCreated\"))\r\n    redirect(\"frontend.admin.userPermissions.index\")\r\n  }\r\n\r\n  //render option\r\n  const renderOption = (): JSX.Element[] => {\r\n    let result: JSX.Element[] = [];\r\n    groups.map(item => {\r\n      result.push(\r\n        <Option value={item.id} key={item.id}>{item.name}</Option>\r\n      )\r\n    })\r\n    return result;\r\n  }\r\n\r\n  const renderCheckbox = (avalibleValue: any) => {\r\n    let checkbox: JSX.Element[] = [];\r\n    const options = [\r\n      {title: t('create'), value:8},\r\n      {title: t('view'), value:4},\r\n      {title: t('edit'), value:2},\r\n      {title: t('delete'), value:1}\r\n    ]\r\n    function onChange(e: any, permission: number ) {\r\n      e.target.checked ? avalibleValue += permission : avalibleValue -= permission;\r\n      result['avalibleValue'] = avalibleValue\r\n    }\r\n    const checked = (permission:number) => {return (avalibleValue & permission) === permission}\r\n    options.map(item => {\r\n      checkbox.push(\r\n        <Checkbox defaultChecked={checked(item.value)} onChange={(e)=>onChange(e,item.value)} key={item.title}>\r\n          {item.title}\r\n        </Checkbox>\r\n      )\r\n    })\r\n    return checkbox\r\n  }\r\n\r\n  return <Layout>\r\n    <div className=\"content\">\r\n      <Form\r\n        {...formItemLayout}\r\n        form={form}\r\n        name=\"createPermission\"\r\n        initialValues={{\r\n          key: \"\",\r\n          name: \"\",\r\n          description: \"\",\r\n          groupId: undefined\r\n        }}\r\n        onFinish={(e) => onFinish(Object.assign(result,e))}\r\n        scrollToFirstError\r\n      >\r\n        <Form.Item\r\n          label={t(\"userPermissions.key\")}\r\n          name=\"key\"\r\n          rules={[\r\n            { required: true, message: t('form.required') },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label={t(\"userPermissions.name\")}\r\n          name=\"name\"\r\n          rules={[\r\n            { required: true, message: t('form.required') },\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label={t(\"group\")}\r\n          name=\"groupId\"\r\n          rules={[\r\n            { required: true, message: t('form.required')}\r\n          ]}\r\n        >\r\n          <Select\r\n            showSearch\r\n            placeholder = {t('placeholder.group')}\r\n            filterOption={ (input: any, option: any) => {\r\n              return option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n            } }\r\n          >\r\n            {renderOption()}\r\n          </Select>\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label={t(\"description\")}\r\n          name=\"description\"\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item\r\n          label={t(\"userPermissions.avalibleValue\")}\r\n          rules={[\r\n            { required: true, message: t('form.required') },\r\n          ]}\r\n        >\r\n          { renderCheckbox(result.avalibleValue) }\r\n        </Form.Item>\r\n\r\n        <Form.Item wrapperCol={{ span: 24 }} style={{ textAlign: \"center\" }}>\r\n          <Button onClick={() => router.back()} style={{ marginRight: 8 }}>\r\n            <LeftCircleFilled /> {t('cancel')}\r\n          </Button>\r\n          <Button type=\"primary\" htmlType=\"submit\" loading={loading} style={{ marginRight: 8 }}>\r\n            <SaveFilled /> {t('submit')}\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  </Layout>\r\n}\r\n\r\nCreate.getInitialProps = async (ctx: any) => {\r\n  const groupService = new UserGroupService(ctx)\r\n  const [error, groups] = await to(groupService.index({ pageSize: -1 }));\r\n  return {\r\n    namespacesRequired: ['common', 'pages', 'menu','errors'],\r\n    error: error,\r\n    groups: _.get(groups, \"data\", []),\r\n  }\r\n}\r\nCreate.permissions = {\r\n  \"root\": \"C\"\r\n}\r\nexport default Create","// This icon file is generated automatically.\nvar LeftCircleFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm104 316.9c0 10.2-4.9 19.9-13.2 25.9L457.4 512l145.4 105.2c8.3 6 13.2 15.6 13.2 25.9V690c0 6.5-7.4 10.3-12.7 6.5l-246-178a7.95 7.95 0 010-12.9l246-178a8 8 0 0112.7 6.5v46.8z\" } }] }, \"name\": \"left-circle\", \"theme\": \"filled\" };\nexport default LeftCircleFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LeftCircleFilledSvg from \"@ant-design/icons-svg/es/asn/LeftCircleFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LeftCircleFilled = function LeftCircleFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: LeftCircleFilledSvg\n  }));\n};\n\nLeftCircleFilled.displayName = 'LeftCircleFilled';\nexport default React.forwardRef(LeftCircleFilled);","// This icon file is generated automatically.\nvar SaveFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z\" } }] }, \"name\": \"save\", \"theme\": \"filled\" };\nexport default SaveFilled;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SaveFilledSvg from \"@ant-design/icons-svg/es/asn/SaveFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SaveFilled = function SaveFilled(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: SaveFilledSvg\n  }));\n};\n\nSaveFilled.displayName = 'SaveFilled';\nexport default React.forwardRef(SaveFilled);","import BaseApi from './BaseService'\r\nimport { group } from 'console';\r\n\r\nclass UserPermission extends BaseApi {\r\n  constructor(context?: Context){\r\n    super(context)\r\n    this.name = 'userPermissions'; //kế thừa CRUD từ thằng cha\r\n  }\r\n  async getByGroupId(data: {groupId: number}){\r\n    const url = this.route(`api.${this.name}.getByGroupId`, data).href\r\n    let result = await this.Request.get(url, data)\r\n    return result;\r\n  }\r\n}\r\n\r\nexport default UserPermission","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin/userPermissions/create\",\n      function () {\n        return require(\"private-next-pages/admin/userPermissions/create.tsx\");\n      }\n    ]);\n  ","import BaseApi from './BaseService'\r\n\r\nclass UserGroups extends BaseApi {\r\n  constructor(context?: Context){\r\n    super(context)\r\n    this.name = 'userGroups'; //kế thừa CRUD từ thằng cha\r\n  }\r\n}\r\n\r\nexport default UserGroups"],"sourceRoot":""}